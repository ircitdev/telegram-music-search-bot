# UspMusicFinder Bot API

API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ Telegram –±–æ—Ç–∞–º–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–∞—Ç—å –∏ —Å–∫–∞—á–∏–≤–∞—Ç—å –º—É–∑—ã–∫—É –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

–í —Ñ–∞–π–ª–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–±–∞–≤—å—Ç–µ:

```env
API_KEYS=bot1:secretkey1,bot2:secretkey2
```

–§–æ—Ä–º–∞—Ç: `–∏–º—è_–±–æ—Ç–∞:–∫–ª—é—á`, –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é.

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
cd /root/uspmusic-bot
pkill -f 'python.*src.main'
nohup python3 -m src.main > logs/bot.log 2>&1 &
```

---

## –ö–æ–º–∞–Ω–¥—ã API

### `/api` - –ü–æ–∏—Å–∫ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–µ–∫–∞

–ò—â–µ—Ç —Ç—Ä–µ–∫, —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç.

**–§–æ—Ä–º–∞—Ç:**
```
/api <chat_id> <api_key> <–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `chat_id` - ID —á–∞—Ç–∞ –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞—É–¥–∏–æ (—á–∏—Å–ª–æ)
- `api_key` - –≤–∞—à API –∫–ª—é—á
- `–∑–∞–ø—Ä–æ—Å` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä:**
```
/api 123456789 musicapi2024secret Linkin Park Numb
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```
‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!

üéµ Linkin Park - Numb
‚è±Ô∏è 3:07
üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —á–∞—Ç: 123456789
üÜî file_id: CQACAgIAAxkBAAI...
```

---

### `/api_search` - –¢–æ–ª—å–∫–æ –ø–æ–∏—Å–∫

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤ –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

**–§–æ—Ä–º–∞—Ç:**
```
/api_search <api_key> <–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å>
```

**–ü—Ä–∏–º–µ—Ä:**
```
/api_search musicapi2024secret Queen Bohemian
```

**–û—Ç–≤–µ—Ç:**
```
üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: Queen Bohemian

1. Queen - Bohemian Rhapsody
   ‚è±Ô∏è 5:55 | ID: dQw4w9WgXcQ

2. Queen - Bohemian Rhapsody (Live)
   ‚è±Ô∏è 6:32 | ID: aBC123xyz
...
```

---

### `/api_download` - –°–∫–∞—á–∞—Ç—å –ø–æ Video ID

–°–∫–∞—á–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤–∏–¥–µ–æ –ø–æ –µ–≥–æ YouTube ID.

**–§–æ—Ä–º–∞—Ç:**
```
/api_download <chat_id> <api_key> <video_id>
```

**–ü—Ä–∏–º–µ—Ä:**
```
/api_download 123456789 musicapi2024secret dQw4w9WgXcQ
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º

### Python (aiogram 3.x)

```python
from aiogram import Bot

MUSIC_BOT_USERNAME = "UspMusicFinder_bot"
API_KEY = "your_api_key"

async def request_music(bot: Bot, target_chat_id: int, query: str):
    """–ó–∞–ø—Ä–æ—Å–∏—Ç—å –º—É–∑—ã–∫—É —á–µ—Ä–µ–∑ UspMusicFinder."""
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –≤ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞
    # –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —á–∞—Ç–µ –∏–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ª–∏—á–∫—É –±–æ—Ç—É

    music_bot_id = 8409655187  # ID –±–æ—Ç–∞ @UspMusicFinder_bot

    await bot.send_message(
        chat_id=music_bot_id,
        text=f"/api {target_chat_id} {API_KEY} {query}"
    )
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - —á–µ—Ä–µ–∑ Forward

```python
async def get_music_via_forward(bot: Bot, user_chat_id: int, query: str):
    """
    1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –±–æ—Ç—É
    2. –ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç –∞—É–¥–∏–æ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç
    """
    await bot.send_message(
        chat_id=8409655187,  # @UspMusicFinder_bot
        text=f"/api {user_chat_id} {API_KEY} {query}"
    )
    # –ê—É–¥–∏–æ –ø—Ä–∏–¥—ë—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ user_chat_id
```

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ü–µ–ª–µ–≤–æ–º—É —á–∞—Ç—É**
   - –î–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
   - –î–ª—è –≥—Ä—É–ø–ø: –±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É

2. **–õ–∏–º–∏—Ç—ã**
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–µ–∫–∞: 60 –º–∏–Ω—É—Ç
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 50 MB (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram)

3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–∫–∞—á–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–∏ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –ø–æ file_id
   - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–¥–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞ –±—ã—Å—Ç—Ä–µ–µ

4. **–û—à–∏–±–∫–∏**
   - `‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –≤ .env
   - `‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á–∞—Ç—É` - –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –≤ —ç—Ç–æ—Ç —á–∞—Ç
   - `‚ùå –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ` - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å

---

## –¢–µ–∫—É—â–∏–µ API –∫–ª—é—á–∏

| –ë–æ—Ç | –ö–ª—é—á |
|-----|------|
| mirabot | `musicapi2024secret` |

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

- –ë–æ—Ç: @UspMusicFinder_bot
- Bot ID: 8409655187
- –°–µ—Ä–≤–µ—Ä: 31.44.7.144
- –ü—É—Ç—å: /root/uspmusic-bot
